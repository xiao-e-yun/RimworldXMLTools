# RimWorld XML Tools

ä¸€å€‹ç”¨æ–¼ RimWorld éŠæˆ² XML å®šç¾©æ–‡ä»¶çš„ç€è¦½ã€æŸ¥æ‰¾å’Œç¹¼æ‰¿é—œä¿‚åˆ†æå·¥å…·ã€‚

## åŠŸèƒ½ç‰¹é»

### ğŸ“š Def ç€è¦½å™¨
- ç€è¦½å’Œæœç´¢ RimWorld çš„æ‰€æœ‰å®šç¾©æ–‡ä»¶ï¼ˆDefsï¼‰
- æŒ‰é¡å‹åˆ†é¡é¡¯ç¤ºï¼ˆThingDefã€RecipeDefã€HediffDef ç­‰ï¼‰
- æ”¯æ´é—œéµå­—æœç´¢éæ¿¾
- é¡¯ç¤ºå®Œæ•´çš„ XML å…§å®¹
- é¡¯ç¤ºæ–‡ä»¶ä¾†æºè·¯å¾‘

### ğŸ”— å±•é–‹ç¹¼æ‰¿
- åˆ†æä¸¦å±•é–‹ XML çš„ç¹¼æ‰¿é—œä¿‚
- é¡¯ç¤ºå®Œæ•´çš„ç¹¼æ‰¿éˆï¼ˆParent â†’ Childï¼‰
- åˆä½µçˆ¶é¡å’Œå­é¡çš„å±¬æ€§
- è™•ç† Abstract å®šç¾©
- è‡ªå‹•è§£æ ParentName å±¬æ€§

### ğŸ” æ¨™ç±¤æŸ¥æ‰¾å™¨
- åœ¨æ‰€æœ‰ XML æ–‡ä»¶ä¸­æœç´¢ç‰¹å®šæ¨™ç±¤
- åˆ—å‡ºè©²æ¨™ç±¤çš„æ‰€æœ‰å”¯ä¸€å€¼
- é¡¯ç¤ºåŒ…å«è©²æ¨™ç±¤çš„æ–‡ä»¶æ•¸é‡
- ä½¿ç”¨å¤šç·šç¨‹åŠ é€Ÿæœç´¢

### ğŸ”§ è¨­ç½®
- è‡ªå®šç¾© RimWorld Data ç›®éŒ„è·¯å¾‘
- è‡ªå‹•ä¿å­˜è¨­ç½®ï¼ˆå­˜å„²åœ¨ `settings.json`ï¼‰
- å•Ÿå‹•æ™‚è‡ªå‹•è¼‰å…¥ä¸Šæ¬¡çš„è¨­ç½®

## å®‰è£

### å¾ Releases ä¸‹è¼‰
[Releases](https://github.com/xiao-e-yun/RimworldXMLTools/releases)

### å¾æºç¢¼ç·¨è­¯

#### å‰ç½®éœ€æ±‚
- Rust 1.70 æˆ–æ›´é«˜ç‰ˆæœ¬
- Cargoï¼ˆRust åŒ…ç®¡ç†å™¨ï¼‰

#### æ­¥é©Ÿ

1. å…‹éš†å€‰åº«ï¼š
```bash
git clone https://github.com/xiao-e-yun/RimworldXMLTools.git
cd RimworldXMLTools
```

2. ç·¨è­¯å°ˆæ¡ˆï¼š
```bash
cargo run --release
```

3. åŸ·è¡Œæª”æ¡ˆå°‡ä½æ–¼ `target/release/rimworld-xml-tools.exe`

## ä½¿ç”¨æ–¹æ³•

1. **å•Ÿå‹•æ‡‰ç”¨ç¨‹å¼**
   - é¦–æ¬¡å•Ÿå‹•æ™‚æœƒè‡ªå‹•åµæ¸¬ RimWorld Data ç›®éŒ„
   - å¦‚æœåµæ¸¬å¤±æ•—ï¼Œè«‹æ‰‹å‹•åœ¨ã€Œè¨­ç½®ã€é é¢è¨­å®šè·¯å¾‘

2. **è¨­å®š Data ç›®éŒ„**
   - é»æ“Šã€ŒğŸ”§ è¨­ç½®ã€æ¨™ç±¤
   - é»æ“Šã€Œç€è¦½ã€æŒ‰éˆ•é¸æ“‡ RimWorld çš„ Data ç›®éŒ„
   - é€šå¸¸ä½æ–¼ `Steam/steamapps/common/RimWorld/Data`

3. **ä½¿ç”¨ Def ç€è¦½å™¨**
   - é»æ“Šã€Œæƒæç›®éŒ„ã€æŒ‰éˆ•è¼‰å…¥æ‰€æœ‰å®šç¾©æ–‡ä»¶
   - åœ¨å·¦å´é¸æ“‡ Def é¡å‹
   - ä½¿ç”¨æœç´¢æ¡†éæ¿¾ç‰¹å®šçš„ Def
   - é»æ“Šåˆ—è¡¨é …ç›®æŸ¥çœ‹å®Œæ•´ XML å…§å®¹

4. **ä½¿ç”¨å±•é–‹ç¹¼æ‰¿**
   - é»æ“Šã€Œæƒæç›®éŒ„ã€æŒ‰éˆ•è¼‰å…¥æ‰€æœ‰å®šç¾©æ–‡ä»¶
   - è¼¸å…¥ Def åç¨±ï¼ˆå¦‚ `Gun_Revolver`ï¼‰
   - é»æ“Šã€Œå±•é–‹ç¹¼æ‰¿ã€æŸ¥çœ‹åˆä½µå¾Œçš„ XML
   - æŸ¥çœ‹ç¹¼æ‰¿éˆè·¯å¾‘

5. **ä½¿ç”¨æ¨™ç±¤æŸ¥æ‰¾å™¨**
   - è¼¸å…¥è¦æœç´¢çš„æ¨™ç±¤åï¼ˆå¦‚ `defName`ã€`label` ç­‰ï¼‰
   - é»æ“Šã€Œæœç´¢ã€æŒ‰éˆ•
   - æŸ¥çœ‹æ‰€æœ‰å”¯ä¸€å€¼åˆ—è¡¨
   - å¯ä»¥è¤‡è£½çµæœç”¨æ–¼å…¶ä»–ç”¨é€”

## æŠ€è¡“æ£§

- **GUI æ¡†æ¶**: [egui](https://github.com/emilk/egui) + [eframe](https://github.com/emilk/egui/tree/master/crates/eframe)
- **XML è§£æ**: [quick-xml](https://github.com/tafia/quick-xml)
- **ä¸¦è¡Œè™•ç†**: [rayon](https://github.com/rayon-rs/rayon)
- **æ–‡ä»¶éæ­·**: [walkdir](https://github.com/BurntSushi/walkdir)
- **æ–‡ä»¶å°è©±æ¡†**: [rfd](https://github.com/PolyMeilex/rfd)
- **éŒ¯èª¤è™•ç†**: [anyhow](https://github.com/dtolnay/anyhow)
- **åºåˆ—åŒ–**: [serde](https://github.com/serde-rs/serde)

## å°ˆæ¡ˆçµæ§‹

```
tools/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.rs          # æ‡‰ç”¨ç¨‹å¼å…¥å£å’Œä¸»ä»‹é¢
â”‚   â”œâ”€â”€ browser.rs       # Def ç€è¦½å™¨åŠŸèƒ½
â”‚   â”œâ”€â”€ finder.rs        # æ¨™ç±¤æŸ¥æ‰¾å™¨åŠŸèƒ½
â”‚   â”œâ”€â”€ inheritance.rs   # ç¹¼æ‰¿å±•é–‹åŠŸèƒ½
â”‚   â”œâ”€â”€ settings.rs      # è¨­ç½®ç®¡ç†
â”‚   â””â”€â”€ xml_parser.rs    # XML è§£æå·¥å…·
â”œâ”€â”€ assets/
â”‚   â””â”€â”€ icon.png         # æ‡‰ç”¨ç¨‹å¼åœ–æ¨™
â”œâ”€â”€ Cargo.toml           # å°ˆæ¡ˆä¾è³´é…ç½®
â””â”€â”€ build.rs             # æ§‹å»ºè…³æœ¬ï¼ˆWindows è³‡æºï¼‰
```

## é–‹ç™¼

```bash
cargo run
```